<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Graphical Display of Resources</title>
</head>
<body>
	<h3>OED feature enhancement: using baseline in displayed data</h3>
	<h4>Idea</h4>
	<p>
		Meters show non-zero value even when someone is not in a building.
		This is due to systems in the building, such as fans, that are not
		under the control of building occupants. The value of this reading is
		known as the baseline usage (or just baseline). The low troughs in
		this OED graphic represent the baseline dates when students are not in
		residence):<br> <img alt="OED line graph"
			src="images/OEDLineGraph.png" />
	<p>When users look at usage they currently see the total usage
		including the baseline. This can confuse people because the usage may
		be much higher than they expect due to the baseline usage.
		Furthermore, when sustainability people ask for building occupants to
		reduce consumption, they often use OED to show the outcome. This can
		disappoint people because the percentage change is much lower due to
		inclusion of the baseline usage. To mitigate the impact of baseline
		usage, we want the option to subtract the baseline from the data shown
		to the user. OED will still allow the current graphic because energy
		managers and others want to see total usage at times.
	<p>OED release 0.5 includes the database entries for storing
		baseline information. The release this spring is planned to have a
		system for semiautomatic baselining of meters. This will allow an
		admin to choose the start and end time of low usage via mouse click on
		a graph and OED will automatically calculate and allow the admin to
		store the optimal baseline. This requires a calculation because the
		energy usage varies a little over time and is not constant during the
		basline period. With these two piece in place, OED is ready to remove
		baseline values from the graphics displayed.
	<h4>Implementation</h4>
	<p>Subtracting a constant value from a meter's database values is
		very easy. A complication in OED is the fact that it supports groups
		which represent aan rbitrary combination of meters. The group
		information is stored as a directed acyclic graph (DAG) in the
		postgreSQL database using SQL extensions. The same logic that
		aggregates the meter data into combined group data will be used to
		aggregate the baselines of all included meters to get the total
		baseline for the group. Once the baseline value is known, it can be
		subtracted from the meter values.
	<p>A complication is what to do if only some of the meters in a
		group have a baseline. After discussion with sustainability people,
		the consensus is that you cannot apply a baseline unless all meters in
		the group have a baseline. This will require checking this condition
		and giving a warning message if the baseline is not applied.
	<p>A final complication is the fact that baselines can vary with
		time. For example, a building might be renovated and thereby change it
		energy usage and pattern. To support this, OED wants to allow
		baselines that vary with time. This complicates applying them to meter
		data since it is not a simple subtraction across all time. One
		possible solution is to create virtual meters (ones that are only used
		for calculations). The meter data would be the negative value of the
		baseline for each time period that the given baseline is active. This
		is fairly easy to do with only a few points since each meter reading
		has a start time and duration associated with it. When this virtual
		meter is added to the meter/group to which these baselines apply, the
		final result will be meter data with the baseline subtracted. While it
		is believed this will work within OED, an implementor needs to analyze
		if the results are correct at the boundaries where two baselines meet
		in time to verify the correct result is obtained during the averaging
		used for the graphics. We believe virtual meters have other
		applications so this would be a first usage of the idea and proof that
		it yields correct results. There are alternative ways involving
		splitting the time represented by a graph and applying separate
		subtractions to each range so it can still be done if the idea above
		is not viable.
	<h4>Difficulty</h4>
	<p>A basic understanding of graphs (esp. DAGs) will be needed and
		the ability to apply this to the postgreSQL extensions for storing
		them. The baselines that vary with time will require analysis and
		design of the system. Given all of this, this project is of medium to
		medium hard difficulty to complete.
</body>
</html>