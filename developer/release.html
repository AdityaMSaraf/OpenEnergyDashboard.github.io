---
layout: developer
title: OED release
---
<div>
	<h1>Preparing an OED Release</h1>
	<p>In preparing for an OED release, the following steps should be followed:</p>
	<ol>
		<li>Releases should correspond to a Milestone for the project.</li>
		<li>Announce to the Developer discussion board so everyone can look over the proposed release.</li>
		<li>Review the Milestone for this release to make sure all issues are complete or reassigned.</li>
		<li>See if there are any package or security issues that need to be addressed.</li>
		<li>Do the final steps to prepare for the new version:</li>
		<ul>
			<li>Edit package.json to change the line ""version": "0.7.0"," to the version number you are about to
				release. Assuming you are going to version 0.8.0 (as in the next step for migrations) then it becomes:
				"version": "0.8.0",</li>
			<li>Assuming you have a migration of the database for this release, edit
				src/server/migrations/registerMigration.js to add a line that corresponds to the migration folder in
				src/server/migrations. For example, if you are migrating from 0.7.0 to 0.8.0 and have the directory
				src/server/migrations/0.7.0-0.8.0 then you add the line "require('./0.7.0-0.8.0')" remembering to put a
				comma at the end of line on the next-to-last (penultimate) line with a require." You should put the
				migration listings in order of their release number. Note if the last release did not have migrations
				then you need to use that as the previous version number so that the migration directories (and the next
				step) do not have gaps in the ranges or the migration will fail.
			</li>
			<li>Create the index.js file in the migration you are adding, e.g.,
				src/server/migrations/0.7.0-0.8.0/sql/index.js. You can look at one for a previous migration to see what
				to do. First, you need to edit the lines so the "fromVersion" and "toVersion" correspond to the version
				you are going from to the version you are going to. In the running example that would be "fromVersion:
				'0.7.0'," and "toVersion: '0.8.0',". You now need to add a line inside "up: async db => {" for each
				migration file you have in this migration subdirectory. An example of a line would be:<br>await
				db.none(sqlFile('../migrations/0.7.0-0.8.0/sql/meter/some_meter_change.sql'));
				<br>where you need to make sure there is one line for each file that actually exists for this migration.
			</li>
		</ul>
		<li>Do extensive running and testing of OED in a web browser. When possible, test in all major web browsers.
		</li>
		<li>Verify the upgrade from a previous version works using the directions on the latest version of the <a
				href="../help/v0.7.0/adminUpgrading.html">Admin
				Upgrading</a> help page. This normally means starting from the previous version on a server. If not
			already
			there see the <a href="../help/v0.7.0/adminInstallation.html">Admin Installation</a> help page on doing this
			where you will need to load in test data, add
			groups, etc. before upgrading to be sure the database migrates correctly. From the previous version you do
			the upgrade. After the upgrade make sure everything works correctly including the new features.</li>
		<li>Create the GitHub release following the steps in <a
				href="https://docs.github.com/en/github/administering-a-repository/releasing-projects-on-github/managing-releases-in-a-repository"
				rel="noopener noreferrer">GitHub
				Managing releases in a repository</a>. Note you can save as a draft for later release.</li>
		<li>Add info about release to an OED news items and release pages on the website.</li>
		<li>Celebrate.</li>
	</ol>
</div>