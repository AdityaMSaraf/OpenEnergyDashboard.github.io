---
layout: developer
title: OED test data
---

<div>
	<h1>OED developer test data</h1>
	<p>Developers want to have test meter data for OED development that is consistent, stable and does not require
		having access to actual meters. This describes how to get and load such meter test data.</p>

	<h2>Doing OED comparison graphs</h2>
	<p>The comparison graphic in OED uses the current time to compare usage over a given period to the same period
		shifted
		by that same period in the past. Since the test data has static dates, they will not include dates near the
		current time. This means that you cannot see comparison data. We will be posting directions to import test data
		that will allow comparison graphs.</p>

	<h2>Maps</h2>
	<p>For using the following data with maps, please see the <a href="testMap.html">test map page</a>.</p>

	<h2>Prerequisites</h2>
	<p>What follows assumes you have a properly installed and working OED but have not yet loaded in the reading data
		described here. (See comments at the top of the automated script at src/scripts/testData.sh
		to see how to remove the reading data if that is needed.) At
		a minimum you should be able to see the main OED page in a web browser (normally URL of localhost:3000).
		Normally the database is automatically created and works fine. If you get errors about the database then you
		need to address them before you can do this or get the test data in (if you get errors during this process).
		Finally, these directions are written assuming you are using Docker. It should be possible to do these outside
		Docker. Please let the project know if you are interested in directions for doing that.</p>
	<p>The import of this data into OED uses the CSV import feature that is described in the <a
			href="../help/v0.7.0/adminCsvImport.html">CSV import help</a> and pages linked from that page, esp. about
		readings. You do not need to know all those
		details
		but can get further information as needed.</p>

	<h2>Mathematical Test Data</h2>
	<p>The OED test data generation code can generate sine and cosine based data. It has several advantages:</p>
	<ul>
		<li>You can create on your own machine without needing to download anything.</li>
		<li>The provided script will generate the data and load it into your OED database for use within the system.
		</li>
		<li>Since it has a regular pattern, it is often easy to see issues in graphed data.</li>
		<li>Different datasets can be used to focus on different types of testing.</li>
	</ul>
	<p>It is easy to use this data. First, make sure you have OED running so it is available to respond to the CSV
		requests to load the meter data. Next, run the
		command
		<code>npm run testData</code>. This may take a few minutes but when it completes there should be new meters
		available in OED (you will need to refresh the web page to see them and this assumes you are logged in as an
		admin user since the meters are not visible to others when automatically created) and the CSV files used will be
		removed
		unless
		there
		was an error. This generates all the standard test data except the one where readings are every minute since
		that is
		very large. Note the script will automatically refresh your OED reading data so the new test data can be
		graphed. If this does not happen then an error likely occurred.
	</p>
	<p>The following table gives a list of the available data and information about it. The meter name assumes you use
		the
		provided script to load the data. (If you want to generate the test data outside the usual script, the
		&ltcommand name&gt is what you
		use to create this dataset manually with
		<code>docker compose run web npm run &ltcommand name&gt</command></code>. You will then need to load the
		reading data
		into OED as described <a href="../help/v0.7.0/adminReadingsImport.html">reading import page</a> >. The file will
		have the name indicated and is located in the
		<code>src/server/test/db/data/automatedTests/</code> directory.) After running the script, you can you create a
		group that contains the
		testSqSin and testSqCos meters since the value should be constant at 2.5 and can be used for testing that groups
		are working as expected.
	</p>
	<table>
		<thead>
			<tr>
				<th>Description</th>
				<th>Meter name</th>
				<th># points/file size</th>
				<th>
					<command>&ltcommand name&gt</command>
				</th>
				<th>File produced</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>Sine function with a period of 45 days and amplitude 3 for 1 year with points every 4 days</td>
				<td>test4DaySin</td>
				<td>92 points/5kB</td>
				<td>generateFourDayTestingData</td>
				<td>fourDayFreqTestData.csv</td>
			</tr>
			<tr>
				<td>Sine function with a period of 45 days and amplitude 3 for 1 year with points every 4 hours</td>
				<td>test4HourSin</td>
				<td>2196 points/129kB</td>
				<td>generateFourHourTestingData</td>
				<td>fourHourFreqTestData.csv</td>
			</tr>
			<tr>
				<td>Sine function with a period of 45 days and amplitude 3 for 1 year with points every 23 minutes</td>
				<td>test23MinSin</td>
				<td>22915 points/1.4MB</td>
				<td>generateTwentyThreeMinuteTestingData</td>
				<td>twentyThreeMinuteFreqTestData.csv.</td>
			</tr>
			<tr>
				<td>Sine function with a period of 45 days and amplitude 3 for 1 year with points every 15 minutes</td>
				<td>test15MinSin</td>
				<td>35136 points/2.1MB</td>
				<td>generateFifteenMinuteTestingData</td>
				<td>fifteenMinuteFreqTestData.csv</td>
			</tr>
			<tr>
				<td>Cosine function with a period of 45 days and amplitude 3 for 1 year with points every 23 minutes
				</td>
				<td>test23MinCos</td>
				<td>22915 points/1.4MB</td>
				<td>generateCosineTestingData</td>
				<td>23FreqCosineTestData.csv</td>
			</tr>
			<tr>
				<td>Sine squared function with a period of 45 days and amplitude 2.5 for 1 year with points every 1 day
				</td>
				<td>testSqSin</td>
				<td>366 points/21kB</td>
				<td>generateSineSquaredTestingData</td>
				<td>2.5AmpSineSquaredTestData.csv</td>
			</tr>
			<tr>
				<td>Cosine squared function with a period of 45 days and amplitude 2.5 for 1 year with points every 1
					day
				</td>
				<td>testSqCos</td>
				<td>366 points/21kB</td>
				<td>generateCosineSquaredTestingData</td>
				<td>2.5AmpCosineSquaredTestData.csv</td>
			</tr>
			<tr>
				<td>Sine function with a period of 45 days and amplitudes 1-7 for 2 years with points every 15 minutes
				</td>
				<td>testAmp1Sin, testAmp2Sin, ...</td>
				<td>70176 points/4.2MB each; 29.4MB total</td>
				<td>generateVariableAmplitudeTestingData</td>
				<td>15Freq1AmpSineTestData.csv, 15Freq2AmpSineTestData.csv, ...</td>
			</tr>
			<tr>
				<td>Sine function with a period of 45 days and amplitude 3 for 1 year with points every 1 minute. This
					is
					normally used for specialized testing of a large number of readings and not automatically generated
					by
					the script.</td>
				<td>test1MinSin</td>
				<td>527040 points/32MB</td>
				<td>generateOneMinuteTestingData</td>
				<td>oneMinuteFreqTestData.csv</td>
			</tr>
		</tbody>
	</table>
	<p>The following picture shows the meters test4DaySin, test4HourSin, test23MinSin & test15MinSine. It is designed to
		show how the number of points impact the line quality in OED and verify that varied reading rates do not impact
		the
		OED code. What you see is that the 4 day line is stair step because each group of 4 day points have the same
		value.
		The other meters are very similar in value. This shows that the daily averaging in OED is accurate. Note that in
		this and all line graphics, you will see the same value as you zoom in to see hourly or even minute level
		points.
		This is because the data is kW. The only change you will see is in the quality of the graphic if you zoom in so
		tight that you have limited points to graph.
		<img src="../images/testLineStd.png" alt="Sample line graphic of sine with readings at various rates">
	</p>
	<p>The following picture shows the same meters as above but as a bar graph with 4 week bars. In a perfect world, all
		the
		bars would have the same value for a given date range. As can be seen, there are small differences where the
		value
		varies more as the frequency of the readings goes down. This variation is due to the inaccuracy of low frequency
		readings as is normal. Note the last set of bars varies more due to a known issue in how the bar lengths are
		created.
		<img src="../images/testBarStd.png" alt="Sample bar graphic of sine with readings at various rates">
	</p>
	<p>The following picture shows a line graphic of the sin values for the 7 different amplitudes (1-7). As expected,
		they
		have the same period with a different amplitude. Plus, it looks nice!
		<img src="../images/testLineAmp.png" alt="Sample line graphic of sine with readings at various amplitudes">
	</p>
	<p>The following picture is the same meters as above but for a bar graphic of 1 day that is stacked. It shows some
		stair
		step features due to only having one bar per day but has the same shape as the line graphic. Plus, it also looks
		nice!
		<img src="../images/testBarAmpStack.png"
			alt="Sample bar graphic of sine with readings at various amplitudes and 1 day bars">
	</p>
	<p>The following picture shows a sin and cos with the same amplitude. It should be noted that normally sin and cos
		and
		phase shifted so the high of one is the low of the other. You do not see that because the values were shifted to
		all
		be positive.
		<img src="../images/testLineSinCos.png" alt="Sample line graphic of sine and cosine">
	</p>
	<p>The following picture shows the meters testSqSin & testSqCos along with a group containing both meters (c2s2). If
		OED
		is
		working properly then the group should have a constant value since sin^2 + cos^1 = 1 or the value of the
		amplitude
		in this case. This is a good test of whether groups work (for simple groups of only two meters). If you want to
		see how accurate OED is then just graph this group and you will see that the values only vary in the 9th
		significant digit (values go from 2.49999992 to 2.50000008).
		<img src="../images/testLineSquared.png"
			alt="Sample line graphic of sin^2 and cos^2 along with a group combining them.">
	</p>
	<p>The following image shows sin with readings every minute. It is a very high quality version of the first picture
		with
		points that are less frequent. This data is not automatically generated and is normally only used to test OED's
		speed when there is lots of reading points.
		<img src="../images/testLine1Min.png" alt="Sample line graphic of sine with readings every one minute">
	</p>


	<h2>Real World Test Data</h2>
	<p>This data can show what happens with actual data. However, it is harder to see when things are off. It is
		provided as
		an alternative to the mathematical data but will probably be used less now that that data exists.</p>
	<p>The table below lists the types of test data we have. The first four all have 3.5 years of electric data but for
		different meters so the values vary. The last one is a sample file that you can edit to create your own data.
	</p>
	<table>
		<thead>
			<tr>
				<th>Description</th>
				<th>Readings CSV</th>
				<th>Size of Readings File</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>Contains actual electric data on an hourly basis for about 3.5 years (Oct.
					2016-Apr.
					2020)</td>
				<td><a href="testData/threeYearA.csv" title="threeYearA" download>threeYearA.csv</a>
				</td>
				<td>1.3MB</td>
			</tr>
			<tr>
				<td>Contains actual electric data on an hourly basis for about 3.5 years (Oct.
					2016-Apr.
					2020)</td>
				<td><a href="testData/threeYearB.csv" title="threeYearB" download>threeYearB.csv</a>
				</td>
				<td>1.3MB</td>
			</tr>
			<tr>
				<td>Contains actual electric data on an hourly basis for about 3.5 years (Oct.
					2016-Apr.
					2020)</td>
				<td><a href="testData/threeYearC.csv" title="threeYearC" download>threeYearC.csv</a>
				</td>
				<td>1.3MB</td>
			</tr>
			<tr>
				<td>Contains actual electric data on an hourly basis for about 3.5 years (Oct.
					2016-Apr.
					2020)</td>
				<td><a href="testData/threeYearD.csv" title="threeYearD" download>threeYearD.csv</a>
				</td>
				<td>1.3MB</td>
			</tr>
			<tr>
				<td>Sample file to edit for your own data</td>
				<td><a href="testData/sampleReadings.csv" title="sampleReadings" download>sampleReadings.csv</a>
				</td>
				<td>0 MB</td>
			</tr>
		</tbody>
	</table>

	<h2>Using the provided data</h2>
	<p>Choose the file you want where clicking
		on the link in a web browser will download that file.
		Note you can load as many test data files as you want into a single OED instance.</p>
	<h2>Loading the data into your OED</h2>
	<p>You will want to have OED running during this process. Start it with Docker as you should have previously
		done. Log in as an admin user. Go to the CSV upload page using the "CSV" button in the top, right of the OED web
		page. You should default to the "Readings" tab which is what you want. Now do the following:
	</p>
	<ol>
		<li>Enter the meter name in the box where the sample graph below used the file name without the extension, e.g.,
			threeYearA for the first file. You can use any name you like.</li>
		<li>Use the "Choose File" button to select the file with the reading data you are uploading.</li>
		<li>Check the "Create Meter" box.</li>
		<li>Check the "Refresh Readings" box so the readings will be available right away for graphing. You can delay
			doing this until the last upload if you are doing multiple readings files to make it a little faster. If you
			forget to do this then you must manually refresh the readings to graph them.</li>
		<li>Click the "Submit CSV Data" button to start the upload. This will take a little while (probably less than
			one minute). A popup window will appear when the upload is done telling you the status. It should be SUCCESS
			without any warnings if all went well. If something went wrong then address the issue. Note if there are
			lots of errors then you need to look at the log or console where OED is running to see them all.</li>
		<li>Reload the web page where OED is running to see the new meter(s) and be able to graph them.</li>
	</ol>
	<p>Below is a line graphic with the four 3.5 year meters. If all went well then this is what you should see.</p>
	<img src="./images/threeYearGraphic.png" alt="Sample line graphic of three year electric test data"><br>
	<p>If you don't see this then something is wrong and you should not continue this process and instead ask us
		for help.
		(See link at bottom of page)</p>

	<h2>Creating own data</h2>
	<p>You can download the sample data from the table above. You can edit the sampleReadings.csv file by opening it in
		you preferred editor where a spreadsheet program is fine as long as you make sure to save it as a CSV file.
		Remove the two sample readings on lines 2 and 3 of the file and create new lines with the data you want. Note
		that normally the end time of the previous point is equal to
		the
		start time of the next point in real meter data. You can put in as many lines as you want with readings. Please
		note that if you don't
		put in
		readings for a meter then you may get
		unexpected results when you graph that meter in OED. This file has a header row so it is easier to see what goes
		in each column. Once you are done editing and save the file in CSV format, import it the same way as the
		provided data above except you need to check the "Header Row" box since the file has a header row. Deal with any
		messages to correct problems and see the <a href="../help/v0.7.0/adminReadingsImport.html">readings import
			page</a> for more info on dealing with issues. Note if there are
			lots of errors then you need to look at the log or console where OED is running to see them all.</p>

	<h2 id="dbIssue">Database issue</h2>
	<p>If you cannot load the data into the database or it disappears after shutting down OED, then you likely have
		a
		database issue. To test you can do the following:
	</p>
	<ol>
		<li>Log in as the admin.</li>
		<li>Change the default graph type to something else (say bar) and <strong>save the change</strong>. Make
			sure it
			gives the green popup that it saved okay.</li>
		<li>Refresh the web browser and go tho the main OED page. It should have preselected the bar choice for
			graphic
			indicating that it is the default choice. If this does not work then verify the admin preference change
			was
			actually saved without error because it seems your installation is not saving to the database.</li>
		<li>Shut OED down and bring it back up (keeping the database and you can also skip the npm install).</li>
		<li>When OED is done installing, go to the web page and refresh the page. Again, you should see the bar as
			the
			default selection. If this
			fails then the database changes are not being saved between runs of OED. This indicates an install
			issue. If you
			don't know what to do then contact us.</li>
	</ol>

	<h2>Help</h2>
	<p>You should now be done and have the test data in your OED development system. If something did not work then
		you
		can seek help from the project by <a href="mailto:developer@openenergydashboard.org">contacting us</a>.</p>
</div>